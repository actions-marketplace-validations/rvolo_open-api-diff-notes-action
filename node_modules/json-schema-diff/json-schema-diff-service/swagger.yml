swagger: '2.0'
info:
  version: '0.0.0'
  title: 'Json Schema Diff'

definitions:

  diffResult:
    additionalProperties: false
    properties:
      additionsFound:
        type: 'boolean'
      addedJsonSchema:
        $ref: '#/definitions/jsonSchema'
      removalsFound:
        type: 'boolean'
      removedJsonSchema:
        $ref: '#/definitions/jsonSchema'
    required:
      - 'additionsFound'
      - 'addedJsonSchema'
      - 'removalsFound'
      - 'removedJsonSchema'
    type: 'object'

  errorEntity:
    type: 'object'
    properties:
      error:
        type: 'string'
    additionalProperties: false
    required:
      - 'error'

  jsonSchema:
    description: 'Json schema draft 7'

  schemasToDiff:
    properties:
      sourceSchema:
        $ref: '#/definitions/jsonSchema'
      destinationSchema:
        $ref: '#/definitions/jsonSchema'
    required:
      - 'sourceSchema'
      - 'destinationSchema'
    type: 'object'

paths:

  /diffSchemas:
    post:
      consumes:
        - 'application/json; charset=utf-8'
      parameters:
        - name: 'body'
          in: 'body'
          schema:
            $ref: '#/definitions/schemasToDiff'
      produces:
        - 'application/json; charset=utf-8'
      responses:
        200:
          description: 'The difference result'
          schema:
            $ref: '#/definitions/diffResult'
        400:
          description: 'Bad request'
          schema:
            $ref: '#/definitions/errorEntity'
        500:
          description: 'Internal server error'
          schema:
            $ref: '#/definitions/errorEntity'

  /healthcheck:
    get:
      produces:
        - 'application/json; charset=utf-8'
      responses:
        200:
          description: 'The service is healthy'
          schema:
            additionalProperties: false
            properties:
              version:
                type: 'string'
            required:
              - 'version'
            type: object
        500:
          description: 'The service is unhealthy'
          schema:
            $ref: '#/definitions/errorEntity'
