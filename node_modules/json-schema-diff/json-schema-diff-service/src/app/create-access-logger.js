'use strict';

const onFinished = require('on-finished');


const createAccessLogger = (logger) => (request, response, next) => {
    onFinished(response, () => {
        logger.info('http.respond', `Responded to ${request.method} ${request.path} with ${response.statusCode}`, {
            request: {
                method: request.method,
                url: request.url
            },
            response: {statusCode: response.statusCode}
        });
    });

    next();
};

module.exports = createAccessLogger;
