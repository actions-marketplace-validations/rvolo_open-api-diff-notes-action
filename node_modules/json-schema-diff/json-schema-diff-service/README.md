# Json Schema Diff Service

This service provides an API for identifying differences between two json schema files.

## Development dependencies

- nvm 0.33.0

## Setting up a development machine

Install nodejs
```
nvm install
```

Configure the Atlassian private npm registry. The password is your api key from [https://packages.atlassian.com](https://packages.atlassian.com).
```
npm login --registry=https://packages.atlassian.com/api/npm/atlassian-npm/ --scope=atlassian
```

Install project dependencies
```
npm install
```

Ensure your environment is working by running the pre-commit check
```
npm test
```

## During development

Commits to this codebase should follow the [conventional changelog conventions](https://github.com/bcoe/conventional-changelog-standard/blob/master/convention.md).

To get fast test feedback run `npm run watch`.

- `npm test` - A pre-commit check to be run before pushing any changes
- `npm run watch` - Automatically runs the tests whenever you edit a relevant file
- `npm run start` - Starts the server on port 8080
- `npm run publish-and-deploy` - Deploys your local code to the ddev environment

## Builds

The builds are in [Bitbucket Pipelines](https://bitbucket.org/atlassian/platform-tooling-analytics/addon/pipelines/home)

## Environments

### Dev

[Service Healthcheck](https://json-schema-diff.dev.atl-paas.net/healthcheck)

[Logs](https://splunk.paas-inf.net/en-GB/app/search/search?earliest=-1d&latest=now&q=search%20eventtype%3Dmicros_json-schema-diff%20m.t%3Dapplication%20env%3Dddev&display.events.fields=%5B%22message%22%2C%22m.sv%22%2C%22code%22%2C%22level%22%2C%22msg%22%5D&sid=1561637574.1431029_2326B28B-B8FD-4BA2-BA3E-48E8244F5823&display.page.search.mode=verbose&dispatch.sample_ratio=1)

### Prod

[Service Healthcheck](https://json-schema-diff.prod.atl-paas.net/healthcheck)

[Logs](https://splunk.paas-inf.net/en-GB/app/search/search?earliest=-1d&latest=now&q=search%20eventtype%3Dmicros_json-schema-diff%20m.t%3Dapplication%20env%3Dprod-east&display.events.fields=%5B%22message%22%2C%22m.sv%22%2C%22code%22%2C%22level%22%2C%22msg%22%5D&display.page.search.mode=verbose&dispatch.sample_ratio=1&sid=1561645338.1440283_2326B28B-B8FD-4BA2-BA3E-48E8244F5823)
